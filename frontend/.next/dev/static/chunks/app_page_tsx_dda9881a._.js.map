{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Shopping_Chat_Agent/shopping_chat_agent/frontend/app/page.tsx"],"sourcesContent":["\n\n\n\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport Image from \"next/image\";\n\ntype Phone = {\n  name: string;\n  brand: string;\n  price: number;\n  camera?: string;\n  battery?: string;\n  display?: string;\n  processor?: string;\n  charging?: string;\n  storage?: string;\n  image?: string;\n};\n\ntype Msg = {\n  sender: \"user\" | \"bot\";\n  text?: string;\n  results?: Phone[];\n  compare?: {\n    left?: Phone;\n    right?: Phone;\n    tradeoffs?: string[];\n  };\n};\n\nexport default function Home() {\n  const [input, setInput] = useState(\"\");\n  const [msgs, setMsgs] = useState<Msg[]>([\n    {\n      sender: \"bot\",\n      text: \"ü§ñ Your Smart Assistant for Phone Recommendations ‚Äî Ask, Compare, and Discover the Best Phones Instantly!\",\n    },\n  ]);\n  const [loading, setLoading] = useState(false);\n  const endRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    endRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [msgs, loading]);\n\n  async function send() {\n    if (!input.trim()) return;\n\n    const userMsg: Msg = { sender: \"user\", text: input };\n    setMsgs((prev) => [...prev, userMsg]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ message: userMsg.text }),\n      });\n\n      const data = await res.json();\n\n      setMsgs((prev): Msg[] => {\n        if (data.left || data.right) {\n          return [\n            ...prev,\n            {\n              sender: \"bot\",\n              compare: {\n                left: data.left,\n                right: data.right,\n                tradeoffs: data.tradeoffs || [],\n              },\n            },\n          ];\n        } else if (data.details) {\n          return [\n            ...prev,\n            {\n              sender: \"bot\",\n              results: [data.details],\n              text: data.reply,\n            },\n          ];\n        } else if (data.results) {\n          return [\n            ...prev,\n            {\n              sender: \"bot\",\n              results: data.results,\n              text: data.reply,\n            },\n          ];\n        } else {\n          return [\n            ...prev,\n            { sender: \"bot\", text: data.reply || \"No results found.\" },\n          ];\n        }\n      });\n    } catch {\n      setMsgs((prev) => [\n        ...prev,\n        { sender: \"bot\", text: \"‚ö†Ô∏è Server error ‚Äî please try again later.\" },\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function onKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n    if (e.key === \"Enter\") send();\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-200 via-indigo-200 to-pink-200 p-6\">\n      <div className=\"w-full max-w-3xl backdrop-blur-xl bg-white/40 border border-white/30 shadow-2xl rounded-3xl p-6 transition-all\">\n        <h2 className=\"text-3xl font-extrabold mb-6 text-center text-gray-800\">\n          üì≤ Smart Phone Recommender\n        </h2>\n\n        {/* Chat Window */}\n        <div className=\"h-[60vh] overflow-y-auto p-4 rounded-2xl bg-white/70 shadow-inner space-y-4\">\n          {msgs.map((m, i) => (\n            <div\n              key={i}\n              className={`flex ${\n                m.sender === \"user\" ? \"justify-end\" : \"justify-start\"\n              }`}\n            >\n              <div\n                className={`p-4 rounded-2xl shadow-md text-sm sm:text-base transition-all duration-300 ${\n                  m.sender === \"user\"\n                    ? \"bg-gradient-to-r from-blue-600 to-indigo-500 text-white max-w-[80%]\"\n                    : \"bg-white/90 text-gray-900 border border-gray-200 max-w-[85%]\"\n                }`}\n              >\n                {m.text && (\n                  <div className=\"whitespace-pre-line leading-relaxed\">{m.text}</div>\n                )}\n\n                {/* Show Phone List */}\n                {m.results && (\n                  <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                    {m.results.map((p, idx) => (\n                      <div\n                        key={idx}\n                        className=\"border border-gray-200 rounded-xl bg-white/90 shadow-sm hover:shadow-lg transition-all duration-300 p-3\"\n                      >\n                        {p.image && (\n                          <Image\n                            src={p.image}\n                            alt={p.name}\n                            width={200}\n                            height={150}\n                            className=\"w-full h-36 object-cover rounded-lg\"\n                          />\n                        )}\n                        <div className=\"mt-2\">\n                          <div className=\"font-semibold text-lg\">{p.name}</div>\n                          <div className=\"text-sm text-gray-600\">{p.brand}</div>\n                          <div className=\"font-bold mt-1 text-blue-700\">\n                            ‚Çπ{p.price}\n                          </div>\n                          <div className=\"text-xs mt-1 text-gray-700\">\n                            {p.camera}\n                          </div>\n                          <div className=\"text-xs\">{p.battery}</div>\n                          <div className=\"text-xs\">{p.processor}</div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Compare Layout */}\n                {m.compare && (\n                  <div className=\"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {[m.compare.left, m.compare.right].map((side, idx) => (\n                      <div\n                        key={idx}\n                        className=\"border border-gray-200 rounded-xl bg-white/80 p-3 shadow-sm hover:shadow-md transition-all\"\n                      >\n                        <div className=\"font-semibold text-base text-gray-800\">\n                          {side?.name}\n                        </div>\n                        <div className=\"text-sm text-gray-600\">\n                          {side?.brand} ‚Äî ‚Çπ{side?.price}\n                        </div>\n                        <div className=\"text-xs mt-2\">{side?.camera}</div>\n                        <div className=\"text-xs\">{side?.battery}</div>\n                        <div className=\"text-xs\">{side?.processor}</div>\n                      </div>\n                    ))}\n\n                    {m.compare.tradeoffs && (\n                      <div className=\"col-span-full mt-3 bg-blue-50 p-3 rounded-lg\">\n                        <div className=\"font-semibold text-gray-700\">\n                          Tradeoffs:\n                        </div>\n                        <ul className=\"list-disc pl-5 text-sm text-gray-700 mt-1\">\n                          {m.compare.tradeoffs.map((t, j) => (\n                            <li key={j}>{t}</li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n          <div ref={endRef} />\n        </div>\n\n        {/* Input */}\n        <div className=\"mt-5 flex gap-2 items-center\">\n          <input\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={onKeyDown}\n            className=\"flex-1 border border-gray-300 rounded-full px-5 py-3 shadow-sm focus:ring-2 focus:ring-indigo-400 focus:outline-none bg-white/80 placeholder:text-gray-500\"\n            placeholder=\"Ask e.g. ‚ÄòBest phone under ‚Çπ30k‚Äô or ‚ÄòCompare Pixel 8a vs OnePlus 12R‚Äô\"\n          />\n          <button\n            onClick={send}\n            disabled={loading}\n            className=\"px-6 py-3 bg-gradient-to-r from-indigo-500 to-blue-600 text-white font-semibold rounded-full shadow-md hover:opacity-90 active:scale-95 transition-all disabled:opacity-60\"\n          >\n            {loading ? \"...\" : \"Send\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}